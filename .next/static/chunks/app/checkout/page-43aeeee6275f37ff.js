(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[285],{5295:function(e,t,s){Promise.resolve().then(s.bind(s,523))},523:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var r=s(7437),a=s(2265),n=s(7138),l=s(5587),i=s(9646),o=s(6463);function d(){let e=(0,o.useRouter)(),{items:t,updateQty:s,removeItem:d,changeVariant:c,subtotal:m,clear:x}=(0,l.j)(),[u,h]=(0,a.useState)({customer_name:"",customer_email:"",customer_phone:"",shipping_address:"",shipping_method:"normal"}),g="express"===u.shipping_method?500:350,p=m+(t.length?g:0),y=async s=>{s.preventDefault();try{let s=await fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...u,items:t.map(e=>({productId:e.productId,variantId:e.variantId,qty:e.qty}))})}),r=await s.json();if(!s.ok||!r.success){alert(r.error||"Failed to place order");return}x(),e.push("/success/".concat(r.orderId))}catch(e){console.error(e),alert("Unexpected error placing order")}},f=e=>{let{item:t}=e,s=i.b[t.productId];return(0,r.jsx)("select",{className:"mt-1 text-sm border border-gray-300 rounded-md px-2 py-1",value:t.variantId,onChange:e=>c(t.key,e.target.value),children:s.variants.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))})};return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Checkout"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Complete your order"})]}),(0,r.jsxs)("div",{className:"grid lg:grid-cols-5 gap-8",children:[(0,r.jsx)("div",{className:"lg:col-span-3",children:(0,r.jsxs)("div",{className:"bg-white shadow-lg border border-gray-200 rounded-lg p-8",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Customer Information"}),(0,r.jsxs)("form",{className:"space-y-6",onSubmit:y,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),(0,r.jsx)("input",{required:!0,value:u.customer_name,onChange:e=>h(t=>({...t,customer_name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),(0,r.jsx)("input",{type:"email",required:!0,value:u.customer_email,onChange:e=>h(t=>({...t,customer_email:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),(0,r.jsx)("input",{required:!0,value:u.customer_phone,onChange:e=>h(t=>({...t,customer_phone:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Shipping Address *"}),(0,r.jsx)("textarea",{required:!0,rows:4,value:u.shipping_address,onChange:e=>h(t=>({...t,shipping_address:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"block text-sm font-medium text-gray-700 mb-4",children:"Shipping Method *"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("label",{className:"flex items-center p-4 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,r.jsx)("input",{type:"radio",name:"shipping_method",value:"normal",checked:"normal"===u.shipping_method,onChange:()=>h(e=>({...e,shipping_method:"normal"})),className:"h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300"}),(0,r.jsxs)("span",{className:"ml-3 flex-1",children:[(0,r.jsx)("span",{className:"block text-sm font-medium text-gray-900",children:"Normal Shipping"}),(0,r.jsx)("span",{className:"block text-sm text-gray-600",children:"5-7 business days"})]}),(0,r.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:"Rs.350.00 PKR"})]}),(0,r.jsxs)("label",{className:"flex items-center p-4 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,r.jsx)("input",{type:"radio",name:"shipping_method",value:"express",checked:"express"===u.shipping_method,onChange:()=>h(e=>({...e,shipping_method:"express"})),className:"h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300"}),(0,r.jsxs)("span",{className:"ml-3 flex-1",children:[(0,r.jsx)("span",{className:"block text-sm font-medium text-gray-900",children:"Express Shipping"}),(0,r.jsx)("span",{className:"block text-sm text-gray-600",children:"2-4 business days"})]}),(0,r.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:"Rs.500.00 PKR"})]})]})]}),(0,r.jsx)("div",{className:"bg-yellow-50 p-4 rounded border border-yellow-200 text-yellow-800 text-sm",children:"Payment will be collected on delivery (COD). No online payment required."}),(0,r.jsxs)("div",{className:"pt-2 flex gap-3",children:[(0,r.jsx)("button",{type:"submit",className:"flex-1 bg-red-600 hover:bg-red-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors",children:"Place Order (COD)"}),(0,r.jsx)(n.default,{href:"/",className:"flex-1 text-center bg-gray-900 hover:bg-gray-800 text-white font-semibold py-3 px-6 rounded-lg transition-colors",children:"Continue Shopping"})]})]})]})}),(0,r.jsx)("div",{className:"lg:col-span-2",children:(0,r.jsxs)("div",{className:"bg-white shadow-lg border border-gray-200 rounded-lg p-8",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Order Summary"}),t.length?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"space-y-4",children:t.map(e=>{let t=i.b[e.productId];return(0,r.jsxs)("div",{className:"flex items-start justify-between py-4 border-b border-gray-100",children:[(0,r.jsxs)("div",{className:"flex-1 pr-4",children:[(0,r.jsx)("div",{className:"font-semibold text-gray-900 text-sm",children:t.name}),(0,r.jsx)("div",{className:"text-xs text-gray-600",children:"Variant:"}),(0,r.jsx)(f,{item:e}),(0,r.jsxs)("div",{className:"mt-2 flex items-center space-x-2",children:[(0,r.jsx)("button",{onClick:()=>s(e.key,e.qty-1),className:"w-8 h-8 bg-gray-100 hover:bg-gray-200 rounded-full flex items-center justify-center text-gray-600 hover:text-gray-800 transition-colors",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 12H4"})})}),(0,r.jsx)("span",{className:"w-12 text-center text-sm font-medium",children:e.qty}),(0,r.jsx)("button",{onClick:()=>s(e.key,e.qty+1),className:"w-8 h-8 bg-gray-100 hover:bg-gray-200 rounded-full flex items-center justify-center text-gray-600 hover:text-gray-800 transition-colors",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})})]}),(0,r.jsx)("div",{className:"mt-3",children:(0,r.jsx)("button",{onClick:()=>d(e.key),className:"text-xs text-red-600 hover:text-red-800 font-medium transition-colors",children:"Remove"})})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"font-semibold text-gray-900 text-sm",children:["Rs.",(t.salePrice*e.qty).toLocaleString()," PKR"]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 line-through",children:["Rs.",t.regularPrice.toLocaleString()," PKR"]})]})]},e.key)})}),(0,r.jsxs)("div",{className:"border-t border-gray-200 pt-4 mt-4 space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Subtotal"}),(0,r.jsxs)("span",{className:"text-sm text-gray-900",children:["Rs.",m.toLocaleString()," PKR"]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Shipping"}),(0,r.jsxs)("span",{className:"text-sm text-gray-900 font-medium",children:["Rs.",g.toLocaleString(),".00 PKR"]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center border-t border-gray-200 pt-2",children:[(0,r.jsx)("span",{className:"text-lg font-bold text-gray-900",children:"Total"}),(0,r.jsxs)("span",{className:"text-xl font-bold text-red-600",children:["Rs.",p.toLocaleString()," PKR"]})]})]}),(0,r.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:(0,r.jsx)(n.default,{href:"/",className:"block text-center text-sm text-blue-600 hover:text-blue-800 font-medium transition-colors",children:"← Continue Shopping"})})]}):(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6m6 0V9a2 2 0 00-2-2H9a2 2 0 00-2 2v4.01"})}),(0,r.jsx)("p",{className:"text-gray-500 mb-4",children:"Your cart is empty"}),(0,r.jsx)(n.default,{href:"/",className:"text-red-600 hover:text-red-700 inline-block font-medium",children:"Continue Shopping"})]})]})})]})]})})}},5587:function(e,t,s){"use strict";s.d(t,{CartProvider:function(){return i},j:function(){return o}});var r=s(7437),a=s(2265),n=s(9646);let l=(0,a.createContext)(null);function i(e){let{children:t}=e,[s,i]=(0,a.useState)([]);(0,a.useEffect)(()=>{try{let e=localStorage.getItem("spoilershelf_cart");e&&i(JSON.parse(e))}catch(e){}},[]),(0,a.useEffect)(()=>{try{localStorage.setItem("spoilershelf_cart",JSON.stringify(s))}catch(e){}},[s]);let o=(0,a.useMemo)(()=>s.reduce((e,t)=>{let s=n.b[t.productId];return s?e+s.salePrice*t.qty:e},0),[s]);return(0,r.jsx)(l.Provider,{value:{items:s,addItem:function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;i(r=>{let a="".concat(e,":").concat(t);return r.find(e=>e.key===a)?r.map(e=>e.key===a?{...e,qty:e.qty+s}:e):[...r,{key:a,productId:e,variantId:t,qty:s}]})},removeItem:e=>i(t=>t.filter(t=>t.key!==e)),updateQty:(e,t)=>i(s=>s.map(s=>s.key===e?{...s,qty:Math.max(1,t)}:s)),changeVariant:(e,t)=>i(s=>{let r=s.find(t=>t.key===e);if(!r)return s;let a="".concat(r.productId,":").concat(t),n=s.filter(t=>t.key!==e);return n.find(e=>e.key===a)?n.map(e=>e.key===a?{...e,qty:e.qty+r.qty}:e):[...n,{...r,key:a,variantId:t}]}),clear:()=>i([]),subtotal:o},children:t})}function o(){let e=(0,a.useContext)(l);if(!e)throw Error("useCart must be used within CartProvider");return e}},9646:function(e,t,s){"use strict";s.d(t,{b:function(){return r}});let r={gt3rs:{id:"gt3rs",name:"991 GT3 RS Style SPOILER SHELF - BLACK & WHITE",regularPrice:9999,salePrice:4999,image:"https://lh3.googleusercontent.com/d/1XUpdsY9C4uQ3vSzUD7S9icEkuKWfa4qP=w1600",variants:[{id:"1",name:"Black / Red"},{id:"2",name:"Black / No Sticker"},{id:"3",name:"White / Red"},{id:"4",name:"White / No Sticker"}]},plates:{id:"plates",name:"License Plate Posters",regularPrice:1999,salePrice:1599,image:"https://lh3.googleusercontent.com/d/1_yr6vqjgU5MllWsCtgNsHkQKQn0CEJu-=w1600",variants:[{id:"6",name:"Ferrari Plate"},{id:"7",name:"Porsche Plate"},{id:"8",name:"Lambo Plate"},{id:"9",name:"Porsche 911 Plate"},{id:"10",name:"Imran Khan Plate"},{id:"11",name:"Nissan GTR Plate"}]}}},7138:function(e,t,s){"use strict";s.d(t,{default:function(){return a.a}});var r=s(231),a=s.n(r)},6463:function(e,t,s){"use strict";var r=s(1169);s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})}},function(e){e.O(0,[231,971,23,744],function(){return e(e.s=5295)}),_N_E=e.O()}]);