{% extends 'base.html' %}

{% block title %}Order Confirmation - SpoilerShelf{% endblock %}

{% block content %}
<div class="min-h-screen bg-gray-50 py-12">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Success Message with Animation -->
        <div class="bg-white shadow-lg border border-gray-200 p-12 rounded-lg text-center animate-fade-in">
            <div class="mb-8">
                <!-- Animated Success Icon -->
                <div
                    class="mx-auto flex items-center justify-center h-20 w-20 rounded-full bg-green-100 mb-6 animate-bounce">
                    <svg class="h-12 w-12 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                    </svg>
                </div>
                <h1 class="text-5xl font-bold text-gray-900 mb-4 animate-slide-up">ðŸŽ‰ Thank You!</h1>
                <p class="text-2xl text-gray-600 mb-8 animate-slide-up-delay">Your order has been successfully placed.
                </p>

                <!-- Order ID Badge -->
                <div
                    class="inline-block bg-red-100 text-red-800 px-6 py-3 rounded-full font-bold text-lg mb-8 animate-pulse">
                    Order #{{ order.id }}
                </div>
            </div>

            <!-- Order Details -->
            <div class="bg-gray-50 p-8 rounded-lg mb-8 animate-slide-up-delay-2">
                <h2 class="text-3xl font-bold text-gray-900 mb-6">Order Details</h2>
                <div class="grid md:grid-cols-2 gap-6 text-left">
                    <div>
                        <h3 class="text-xl font-semibold text-gray-900 mb-4">Order Information</h3>
                        <div class="space-y-3 text-gray-700">
                            <div class="flex justify-between">
                                <span class="font-medium">Order ID:</span>
                                <span class="font-bold">#{{ order.id }}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="font-medium">Order Date:</span>
                                <span>{{ order.created_at|date:"F j, Y" }}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="font-medium">Status:</span>
                                <span class="text-green-600 font-semibold">{{ order.get_status_display }}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="font-medium">Total Amount:</span>
                                <span class="font-bold text-red-600">Rs.{{ order.total_amount|floatformat:2 }}
                                    PKR</span>
                            </div>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold text-gray-900 mb-4">Customer Information</h3>
                        <div class="space-y-3 text-gray-700">
                            <div class="flex justify-between">
                                <span class="font-medium">Name:</span>
                                <span>{{ order.customer_name }}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="font-medium">Email:</span>
                                <span>{{ order.customer_email }}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="font-medium">Phone:</span>
                                <span>{{ order.customer_phone }}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="font-medium">Address:</span>
                                <span class="text-sm">{{ order.shipping_address }}</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Order Items -->
            {% if order.items.all %}
            <div class="bg-gray-50 p-8 rounded-lg mb-8 animate-slide-up-delay-3">
                <h2 class="text-3xl font-bold text-gray-900 mb-6">Order Items</h2>
                <div class="space-y-4">
                    {% for item in order.items.all %}
                    <div class="flex justify-between items-center py-4 border-b border-gray-200 last:border-b-0">
                        <div class="flex-1">
                            <h3 class="font-semibold text-gray-900">{{ item.product_variant.product.name }}</h3>
                            <p class="text-sm text-gray-600">{{ item.product_variant.name }}</p>
                            <p class="text-sm text-gray-500">Qty: {{ item.quantity }}</p>
                        </div>
                        <div class="text-right">
                            <p class="font-semibold text-gray-900">Rs.{{ item.get_total|floatformat:2 }} PKR</p>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}

            <!-- Next Steps -->
            <div class="bg-blue-50 p-8 rounded-lg mb-8 animate-slide-up-delay-4">
                <h2 class="text-3xl font-bold text-gray-900 mb-6">What's Next?</h2>
                <div class="space-y-6 text-left">
                    <div class="flex items-start space-x-4">
                        <div class="flex-shrink-0">
                            <div
                                class="w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-bold">
                                1</div>
                        </div>
                        <div>
                            <h3 class="text-lg font-semibold text-gray-900">Order Confirmation</h3>
                            <p class="text-gray-600">You will receive an email confirmation shortly.</p>
                        </div>
                    </div>
                    <div class="flex items-start space-x-4">
                        <div class="flex-shrink-0">
                            <div
                                class="w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-bold">
                                2</div>
                        </div>
                        <div>
                            <h3 class="text-lg font-semibold text-gray-900">Processing</h3>
                            <p class="text-gray-600">We'll process your order within 24-48 hours.</p>
                        </div>
                    </div>
                    <div class="flex items-start space-x-4">
                        <div class="flex-shrink-0">
                            <div
                                class="w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-bold">
                                3</div>
                        </div>
                        <div>
                            <h3 class="text-lg font-semibold text-gray-900">Shipping</h3>
                            <p class="text-gray-600">Your order will be shipped within 7-10 business days.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Contact Information -->
            <div class="bg-yellow-50 p-8 rounded-lg mb-8 animate-slide-up-delay-5">
                <h2 class="text-3xl font-bold text-gray-900 mb-4">Need Help?</h2>
                <p class="text-gray-700 mb-6">Contact us on WhatsApp to track your order or ask any questions.</p>
                <a href="https://wa.me/923006481758" target="_blank"
                    class="inline-flex items-center space-x-3 bg-green-500 hover:bg-green-600 text-white font-bold py-4 px-8 rounded-lg transition-colors duration-300 transform hover:scale-105">
                    <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
                        <path
                            d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488" />
                    </svg>
                    <span>Contact on WhatsApp</span>
                </a>
            </div>

            <!-- Action Buttons -->
            <div class="flex flex-col sm:flex-row gap-4 justify-center animate-slide-up-delay-6">
                <a href="{% url 'landing' %}"
                    class="bg-red-500 hover:bg-red-600 text-white font-bold py-4 px-8 rounded-lg transition-colors duration-300 transform hover:scale-105">
                    Continue Shopping
                </a>
                <a href="{% url 'order' %}"
                    class="bg-gray-900 hover:bg-gray-800 text-white font-bold py-4 px-8 rounded-lg transition-colors duration-300 transform hover:scale-105">
                    Place Another Order
                </a>
            </div>
        </div>
    </div>
</div>

<!-- Confetti Animation -->
<div id="confetti-container" class="fixed inset-0 pointer-events-none z-50"></div>

<style>
    @keyframes fade-in {
        from {
            opacity: 0;
            transform: translateY(20px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @keyframes slide-up {
        from {
            opacity: 0;
            transform: translateY(30px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @keyframes bounce {

        0%,
        20%,
        53%,
        80%,
        100% {
            transform: translate3d(0, 0, 0);
        }

        40%,
        43% {
            transform: translate3d(0, -30px, 0);
        }

        70% {
            transform: translate3d(0, -15px, 0);
        }

        90% {
            transform: translate3d(0, -4px, 0);
        }
    }

    .animate-fade-in {
        animation: fade-in 0.6s ease-out;
    }

    .animate-slide-up {
        animation: slide-up 0.8s ease-out;
    }

    .animate-slide-up-delay {
        animation: slide-up 0.8s ease-out 0.2s both;
    }

    .animate-slide-up-delay-2 {
        animation: slide-up 0.8s ease-out 0.4s both;
    }

    .animate-slide-up-delay-3 {
        animation: slide-up 0.8s ease-out 0.6s both;
    }

    .animate-slide-up-delay-4 {
        animation: slide-up 0.8s ease-out 0.8s both;
    }

    .animate-slide-up-delay-5 {
        animation: slide-up 0.8s ease-out 1.0s both;
    }

    .animate-slide-up-delay-6 {
        animation: slide-up 0.8s ease-out 1.2s both;
    }

    .animate-bounce {
        animation: bounce 1s infinite;
    }

    .animate-pulse {
        animation: pulse 2s infinite;
    }
</style>

<script>
    // Confetti Animation
    function createConfetti() {
        const container = document.getElementById('confetti-container');
        const colors = ['#ef4444', '#3b82f6', '#10b981', '#f59e0b', '#8b5cf6'];

        for (let i = 0; i < 100; i++) {
            setTimeout(() => {
                const confetti = document.createElement('div');
                confetti.style.position = 'absolute';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.top = '-10px';
                confetti.style.width = '10px';
                confetti.style.height = '10px';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.borderRadius = '50%';
                confetti.style.pointerEvents = 'none';
                confetti.style.animation = `fall ${Math.random() * 3 + 2}s linear forwards`;

                container.appendChild(confetti);

                setTimeout(() => {
                    confetti.remove();
                }, 5000);
            }, i * 50);
        }
    }

    // Add fall animation
    const style = document.createElement('style');
    style.textContent = `
    @keyframes fall {
        to {
            transform: translateY(100vh) rotate(360deg);
            opacity: 0;
        }
    }
`;
    document.head.appendChild(style);

    // Trigger confetti on page load
    window.addEventListener('load', () => {
        setTimeout(createConfetti, 500);
    });
</script>
{% endblock %}